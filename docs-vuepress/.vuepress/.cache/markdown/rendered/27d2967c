{"content":"<h2 id=\"数据驱动视图-相当于-ref-reactive\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据驱动视图-相当于-ref-reactive\"><span>数据驱动视图  相当于  ==&gt;   ref reactive</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806202821571.png\" alt=\"image-20250806202821571\"></p>\n<h2 id=\"获取dom-元素-ref\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#获取dom-元素-ref\"><span>获取DOM 元素    Ref</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806211406840.png\" alt=\"image-20250806211406840\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806211642728.png\" alt=\"image-20250806211642728\"></p>\n<h2 id=\"发布评论功能\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#发布评论功能\"><span>发布评论功能</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806212013056.png\" alt=\"image-20250806212013056\"></p>\n<h2 id=\"发请求\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#发请求\"><span>发请求</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806214952225.png\" alt=\"image-20250806214952225\"></p>\n<h2 id=\"监听-useeffect-函数-三个状态\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#监听-useeffect-函数-三个状态\"><span>监听 useEffect 函数 三个状态</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806215239921.png\" alt=\"image-20250806215239921\"></p>\n<h2 id=\"hooks-注意事项\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#hooks-注意事项\"><span>hooks 注意事项</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806221255863.png\" alt=\"image-20250806221255863\"></p>\n<h2 id=\"路由穿参\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由穿参\"><span>路由穿参</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223611028.png\" alt=\"image-20250806223611028\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223633045.png\" alt=\"image-20250806223633045\"></p>\n<h2 id=\"路由嵌套-二级路由\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由嵌套-二级路由\"><span>路由嵌套 二级路由</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223854847.png\" alt=\"image-20250806223854847\"></p>\n<h2 id=\"穿梭组件-穿梭到body\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#穿梭组件-穿梭到body\"><span>穿梭组件 穿梭到body</span></a></h2>\n<div class=\"language-react line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"react\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-react\"><span class=\"line\"><span>      {createPortal(&#x3C;GlobalAudioElement ref={audioRef} />, document.body)}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><h2 id=\"类中的构造期-是否需要添加super\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#类中的构造期-是否需要添加super\"><span>类中的构造期 是否需要添加super</span></a></h2>\n<p>![image-20250809145753313](/Users/guoguo/Library/Application Support/typora-user-images/image-20250809145753313.png)</p>\n<h2 id=\"类式组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#类式组件\"><span>类式组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250809160446729.png\" alt=\"image-20250809160446729\"></p>\n<h2 id=\"函数式组件-props-基础使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#函数式组件-props-基础使用\"><span>函数式组件 props 基础使用</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250809190851584.png\" alt=\"image-20250809190851584\"></p>\n<h2 id=\"生命周期\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生命周期\"><span>生命周期</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810094535016.png\" alt=\"image-20250810094535016\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810095302613.png\" alt=\"image-20250810095302613\"></p>\n<h2 id=\"新的生命周期钩子\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#新的生命周期钩子\"><span>新的生命周期钩子</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810100940405.png\" alt=\"image-20250810100940405\"></p>\n<h2 id=\"路由的严格匹配\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由的严格匹配\"><span>路由的严格匹配</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810161021987.png\" alt=\"image-20250810161021987\"></p>\n<h2 id=\"强制刷新组件-forceupdate\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#强制刷新组件-forceupdate\"><span>强制刷新组件 forceUpdate</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810182537508.png\" alt=\"image-20250810182537508\"></p>\n<h2 id=\"保存一个旧值\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#保存一个旧值\"><span>保存一个旧值</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810211105716.png\" alt=\"image-20250810211105716\"></p>\n<h2 id=\"forwardref-和-useimperativehandle-相当于-vue中的defineexport\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#forwardref-和-useimperativehandle-相当于-vue中的defineexport\"><span>forwardRef 和 useImperativeHandle 相当于 vue中的defineExport</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810213809732.png\" alt=\"image-20250810213809732\"></p>\n<h2 id=\"终止fetch请求-使用useeffect-清理函数-abortcontroller\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#终止fetch请求-使用useeffect-清理函数-abortcontroller\"><span>终止fetch请求 使用useEffect 清理函数 AbortController</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810220000019.png\" alt=\"image-20250810220000019\"></p>\n<h2 id=\"ts-typeof-自动获取类型-不用使用any了\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ts-typeof-自动获取类型-不用使用any了\"><span>TS   typeof 自动获取类型 不用使用any了</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810222544462.png\" alt=\"image-20250810222544462\"></p>\n<h2 id=\"usestate-useeffect-usereducer\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usestate-useeffect-usereducer\"><span>useState useEffect useReducer</span></a></h2>\n<p>usestate 相当于vue的 ref</p>\n<p>useReducer 相当于vue的 reactive</p>\n<p>useEffect 相当于vue的 watch + cumputed + const</p>\n<h2 id=\"react-memo-缓存变化-只有props-发生变化才会重新渲染\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#react-memo-缓存变化-只有props-发生变化才会重新渲染\"><span>React.memo 缓存变化，只有props 发生变化才会重新渲染</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810223528759.png\" alt=\"image-20250810223528759\"></p>\n<h2 id=\"usememo函数的返回值是一个计算好的值-而不是函数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usememo函数的返回值是一个计算好的值-而不是函数\"><span>useMemo函数的返回值是一个计算好的值，而不是函数</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810224323429.png\" alt=\"image-20250810224323429\"></p>\n<h2 id=\"zustand-相当于-pinia\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-相当于-pinia\"><span>zustand 相当于 pinia</span></a></h2>\n<blockquote>\n<p>store / price.jsx</p>\n</blockquote>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  setPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>A 组件</p>\n</blockquote>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">../../store/price</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">  console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">price ===></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>{</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">button</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> onClick</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">={()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">100</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)}></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">add</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">button</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-中间件网址https-zustand-nodejs-cn-docs-middlewares-persist\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-中间件网址https-zustand-nodejs-cn-docs-middlewares-persist\"><span>Zustand 中间件网址https://zustand.nodejs.cn/docs/middlewares/persist</span></a></h2>\n<h2 id=\"zustand-immer-案例-代码片段\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-immer-案例-代码片段\"><span>Zustand + immer 案例 代码片段</span></a></h2>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> immer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand/middleware/immer</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  immer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">      bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        ccc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        ddd</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        eee</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    setPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    setBbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">ccc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">ccc</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  }))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-useshallow-避免重复渲染问题\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-useshallow-避免重复渲染问题\"><span>zustand useShallow，避免重复渲染问题</span></a></h2>\n<p>zustand redux devtools 调试中间件</p>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { create } from 'zustand'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { immer } from 'zustand/middleware/immer'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+ import { devtools } from 'zustand/middleware'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">const usePriceStore = create()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  immer(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     devtools(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      (set) => ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        price: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        aaa: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          bbb: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            ccc: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            ddd: 2,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            eee: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        setPrice: (price) => set(() => ({ price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        addPrice: (price) => set((state) => ({ price: state.price + price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      }),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+      { name: 'priceStore' }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+  )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default usePriceStore;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-持久化存储\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-持久化存储\"><span>Zustand  持久化存储</span></a></h2>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { create } from 'zustand'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { immer } from 'zustand/middleware/immer'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+ import { devtools, persist, createJSONStorage } from 'zustand/middleware'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">const usePriceStore = create()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  immer(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    persist(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      devtools(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        (set) => ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          price: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          aaa: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            bbb: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              ccc: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              ddd: 2,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              eee: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          setPrice: (price) => set(() => ({ price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          addPrice: (price) => set((state) => ({ price: state.price + price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          name: 'priceStore',</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        name: 'priceStore',</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        storage: createJSONStorage(() => sessionStorage),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        // partialize 用的不多 可以自定义存储</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default usePriceStore;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"性能优化-独立监听某一个-避免hooks-持续调用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#性能优化-独立监听某一个-避免hooks-持续调用\"><span>性能优化 独立监听某一个 避免hooks 持续调用</span></a></h2>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+import React, { useEffect, useRef } from 'react';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import A from '../A/index';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import B from '../B/index';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+import usePriceStore from '../../store/price';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">function HelloWorld(props) {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    useEffect(() => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        usePriceStore.subscribe((state) => state.price, (price, prevPrice) => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            console.log('price change ===>', price, prevPrice);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        })</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        return () => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            usePriceStore.unsubscribe()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        }, {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            fireImmediately: true,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            equalityFn: (a, b) => a === b,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    }, []);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    return (</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        &#x3C;div></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;A /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;hr /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;B /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        &#x3C;/div></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default HelloWorld;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"tailwind-封装到独立的文件中\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tailwind-封装到独立的文件中\"><span>tailwind 封装到独立的文件中</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250811224821132.png\" alt=\"image-20250811224821132\"></p>\n<h2 id=\"将-usesearchparams-转换为对象-并附上类型\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#将-usesearchparams-转换为对象-并附上类型\"><span>将 useSearchParams 转换为对象, 并附上类型</span></a></h2>\n<div class=\"language-ts line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"ts\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-ts\"><span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">use client</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> useSearchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">next/navigation</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> useMemo</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">react</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/**</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * 将 useSearchParams 转换为对象, 并附上类型</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">@</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">example</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * const searchParams = useSearchParamsObject&#x3C;{ mode: string }>()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * const mode = searchParams.mode</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * mode 的类型为 string | undefined</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> */</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> function</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useSearchParamsObject</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useSearchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParamsObject</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useMemo</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> Object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromEntries</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">entries</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> as</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Partial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  },</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> searchParamsObject</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"mobx-react-函数式组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#mobx-react-函数式组件\"><span>Mobx-react 函数式组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075452454.png\" alt=\"image-20250813075452454\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075351599.png\" alt=\"image-20250813075351599\"></p>\n<h2 id=\"mobx-类组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#mobx-类组件\"><span>MobX 类组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075528968.png\" alt=\"image-20250813075528968\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075604296.png\" alt=\"image-20250813075604296\"></p>\n","env":{"base":"/","filePath":"/Users/guoguo/code/my-project/guoguo-notes-v2/docs/React.md","filePathRelative":"React.md","frontmatter":{"title":"React","createTime":"2025/08/24 00:25:17","permalink":"/article/v1kjhg1b/"},"sfcBlocks":{"template":{"type":"template","content":"<template><h2 id=\"数据驱动视图-相当于-ref-reactive\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据驱动视图-相当于-ref-reactive\"><span>数据驱动视图  相当于  ==&gt;   ref reactive</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806202821571.png\" alt=\"image-20250806202821571\"></p>\n<h2 id=\"获取dom-元素-ref\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#获取dom-元素-ref\"><span>获取DOM 元素    Ref</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806211406840.png\" alt=\"image-20250806211406840\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806211642728.png\" alt=\"image-20250806211642728\"></p>\n<h2 id=\"发布评论功能\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#发布评论功能\"><span>发布评论功能</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806212013056.png\" alt=\"image-20250806212013056\"></p>\n<h2 id=\"发请求\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#发请求\"><span>发请求</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806214952225.png\" alt=\"image-20250806214952225\"></p>\n<h2 id=\"监听-useeffect-函数-三个状态\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#监听-useeffect-函数-三个状态\"><span>监听 useEffect 函数 三个状态</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806215239921.png\" alt=\"image-20250806215239921\"></p>\n<h2 id=\"hooks-注意事项\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#hooks-注意事项\"><span>hooks 注意事项</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806221255863.png\" alt=\"image-20250806221255863\"></p>\n<h2 id=\"路由穿参\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由穿参\"><span>路由穿参</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223611028.png\" alt=\"image-20250806223611028\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223633045.png\" alt=\"image-20250806223633045\"></p>\n<h2 id=\"路由嵌套-二级路由\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由嵌套-二级路由\"><span>路由嵌套 二级路由</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223854847.png\" alt=\"image-20250806223854847\"></p>\n<h2 id=\"穿梭组件-穿梭到body\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#穿梭组件-穿梭到body\"><span>穿梭组件 穿梭到body</span></a></h2>\n<div class=\"language-react line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"react\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-react\"><span class=\"line\"><span>      {createPortal(&#x3C;GlobalAudioElement ref={audioRef} />, document.body)}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><h2 id=\"类中的构造期-是否需要添加super\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#类中的构造期-是否需要添加super\"><span>类中的构造期 是否需要添加super</span></a></h2>\n<p>![image-20250809145753313](/Users/guoguo/Library/Application Support/typora-user-images/image-20250809145753313.png)</p>\n<h2 id=\"类式组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#类式组件\"><span>类式组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250809160446729.png\" alt=\"image-20250809160446729\"></p>\n<h2 id=\"函数式组件-props-基础使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#函数式组件-props-基础使用\"><span>函数式组件 props 基础使用</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250809190851584.png\" alt=\"image-20250809190851584\"></p>\n<h2 id=\"生命周期\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生命周期\"><span>生命周期</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810094535016.png\" alt=\"image-20250810094535016\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810095302613.png\" alt=\"image-20250810095302613\"></p>\n<h2 id=\"新的生命周期钩子\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#新的生命周期钩子\"><span>新的生命周期钩子</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810100940405.png\" alt=\"image-20250810100940405\"></p>\n<h2 id=\"路由的严格匹配\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由的严格匹配\"><span>路由的严格匹配</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810161021987.png\" alt=\"image-20250810161021987\"></p>\n<h2 id=\"强制刷新组件-forceupdate\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#强制刷新组件-forceupdate\"><span>强制刷新组件 forceUpdate</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810182537508.png\" alt=\"image-20250810182537508\"></p>\n<h2 id=\"保存一个旧值\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#保存一个旧值\"><span>保存一个旧值</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810211105716.png\" alt=\"image-20250810211105716\"></p>\n<h2 id=\"forwardref-和-useimperativehandle-相当于-vue中的defineexport\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#forwardref-和-useimperativehandle-相当于-vue中的defineexport\"><span>forwardRef 和 useImperativeHandle 相当于 vue中的defineExport</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810213809732.png\" alt=\"image-20250810213809732\"></p>\n<h2 id=\"终止fetch请求-使用useeffect-清理函数-abortcontroller\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#终止fetch请求-使用useeffect-清理函数-abortcontroller\"><span>终止fetch请求 使用useEffect 清理函数 AbortController</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810220000019.png\" alt=\"image-20250810220000019\"></p>\n<h2 id=\"ts-typeof-自动获取类型-不用使用any了\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ts-typeof-自动获取类型-不用使用any了\"><span>TS   typeof 自动获取类型 不用使用any了</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810222544462.png\" alt=\"image-20250810222544462\"></p>\n<h2 id=\"usestate-useeffect-usereducer\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usestate-useeffect-usereducer\"><span>useState useEffect useReducer</span></a></h2>\n<p>usestate 相当于vue的 ref</p>\n<p>useReducer 相当于vue的 reactive</p>\n<p>useEffect 相当于vue的 watch + cumputed + const</p>\n<h2 id=\"react-memo-缓存变化-只有props-发生变化才会重新渲染\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#react-memo-缓存变化-只有props-发生变化才会重新渲染\"><span>React.memo 缓存变化，只有props 发生变化才会重新渲染</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810223528759.png\" alt=\"image-20250810223528759\"></p>\n<h2 id=\"usememo函数的返回值是一个计算好的值-而不是函数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usememo函数的返回值是一个计算好的值-而不是函数\"><span>useMemo函数的返回值是一个计算好的值，而不是函数</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810224323429.png\" alt=\"image-20250810224323429\"></p>\n<h2 id=\"zustand-相当于-pinia\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-相当于-pinia\"><span>zustand 相当于 pinia</span></a></h2>\n<blockquote>\n<p>store / price.jsx</p>\n</blockquote>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  setPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>A 组件</p>\n</blockquote>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">../../store/price</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">  console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">price ===></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>{</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">button</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> onClick</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">={()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">100</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)}></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">add</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">button</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-中间件网址https-zustand-nodejs-cn-docs-middlewares-persist\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-中间件网址https-zustand-nodejs-cn-docs-middlewares-persist\"><span>Zustand 中间件网址https://zustand.nodejs.cn/docs/middlewares/persist</span></a></h2>\n<h2 id=\"zustand-immer-案例-代码片段\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-immer-案例-代码片段\"><span>Zustand + immer 案例 代码片段</span></a></h2>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> immer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand/middleware/immer</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  immer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">      bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        ccc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        ddd</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        eee</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    setPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    setBbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">ccc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">ccc</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  }))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-useshallow-避免重复渲染问题\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-useshallow-避免重复渲染问题\"><span>zustand useShallow，避免重复渲染问题</span></a></h2>\n<p>zustand redux devtools 调试中间件</p>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { create } from 'zustand'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { immer } from 'zustand/middleware/immer'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+ import { devtools } from 'zustand/middleware'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">const usePriceStore = create()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  immer(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     devtools(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      (set) => ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        price: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        aaa: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          bbb: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            ccc: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            ddd: 2,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            eee: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        setPrice: (price) => set(() => ({ price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        addPrice: (price) => set((state) => ({ price: state.price + price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      }),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+      { name: 'priceStore' }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+  )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default usePriceStore;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-持久化存储\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-持久化存储\"><span>Zustand  持久化存储</span></a></h2>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { create } from 'zustand'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { immer } from 'zustand/middleware/immer'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+ import { devtools, persist, createJSONStorage } from 'zustand/middleware'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">const usePriceStore = create()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  immer(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    persist(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      devtools(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        (set) => ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          price: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          aaa: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            bbb: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              ccc: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              ddd: 2,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              eee: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          setPrice: (price) => set(() => ({ price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          addPrice: (price) => set((state) => ({ price: state.price + price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          name: 'priceStore',</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        name: 'priceStore',</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        storage: createJSONStorage(() => sessionStorage),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        // partialize 用的不多 可以自定义存储</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default usePriceStore;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"性能优化-独立监听某一个-避免hooks-持续调用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#性能优化-独立监听某一个-避免hooks-持续调用\"><span>性能优化 独立监听某一个 避免hooks 持续调用</span></a></h2>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+import React, { useEffect, useRef } from 'react';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import A from '../A/index';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import B from '../B/index';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+import usePriceStore from '../../store/price';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">function HelloWorld(props) {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    useEffect(() => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        usePriceStore.subscribe((state) => state.price, (price, prevPrice) => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            console.log('price change ===>', price, prevPrice);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        })</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        return () => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            usePriceStore.unsubscribe()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        }, {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            fireImmediately: true,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            equalityFn: (a, b) => a === b,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    }, []);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    return (</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        &#x3C;div></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;A /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;hr /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;B /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        &#x3C;/div></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default HelloWorld;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"tailwind-封装到独立的文件中\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tailwind-封装到独立的文件中\"><span>tailwind 封装到独立的文件中</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250811224821132.png\" alt=\"image-20250811224821132\"></p>\n<h2 id=\"将-usesearchparams-转换为对象-并附上类型\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#将-usesearchparams-转换为对象-并附上类型\"><span>将 useSearchParams 转换为对象, 并附上类型</span></a></h2>\n<div class=\"language-ts line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"ts\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-ts\"><span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">use client</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> useSearchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">next/navigation</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> useMemo</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">react</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/**</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * 将 useSearchParams 转换为对象, 并附上类型</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">@</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">example</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * const searchParams = useSearchParamsObject&#x3C;{ mode: string }>()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * const mode = searchParams.mode</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * mode 的类型为 string | undefined</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> */</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> function</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useSearchParamsObject</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useSearchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParamsObject</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useMemo</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> Object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromEntries</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">entries</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> as</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Partial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  },</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> searchParamsObject</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"mobx-react-函数式组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#mobx-react-函数式组件\"><span>Mobx-react 函数式组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075452454.png\" alt=\"image-20250813075452454\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075351599.png\" alt=\"image-20250813075351599\"></p>\n<h2 id=\"mobx-类组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#mobx-类组件\"><span>MobX 类组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075528968.png\" alt=\"image-20250813075528968\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075604296.png\" alt=\"image-20250813075604296\"></p>\n</template>","contentStripped":"<h2 id=\"数据驱动视图-相当于-ref-reactive\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数据驱动视图-相当于-ref-reactive\"><span>数据驱动视图  相当于  ==&gt;   ref reactive</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806202821571.png\" alt=\"image-20250806202821571\"></p>\n<h2 id=\"获取dom-元素-ref\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#获取dom-元素-ref\"><span>获取DOM 元素    Ref</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806211406840.png\" alt=\"image-20250806211406840\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806211642728.png\" alt=\"image-20250806211642728\"></p>\n<h2 id=\"发布评论功能\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#发布评论功能\"><span>发布评论功能</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806212013056.png\" alt=\"image-20250806212013056\"></p>\n<h2 id=\"发请求\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#发请求\"><span>发请求</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806214952225.png\" alt=\"image-20250806214952225\"></p>\n<h2 id=\"监听-useeffect-函数-三个状态\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#监听-useeffect-函数-三个状态\"><span>监听 useEffect 函数 三个状态</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806215239921.png\" alt=\"image-20250806215239921\"></p>\n<h2 id=\"hooks-注意事项\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#hooks-注意事项\"><span>hooks 注意事项</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806221255863.png\" alt=\"image-20250806221255863\"></p>\n<h2 id=\"路由穿参\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由穿参\"><span>路由穿参</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223611028.png\" alt=\"image-20250806223611028\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223633045.png\" alt=\"image-20250806223633045\"></p>\n<h2 id=\"路由嵌套-二级路由\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由嵌套-二级路由\"><span>路由嵌套 二级路由</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223854847.png\" alt=\"image-20250806223854847\"></p>\n<h2 id=\"穿梭组件-穿梭到body\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#穿梭组件-穿梭到body\"><span>穿梭组件 穿梭到body</span></a></h2>\n<div class=\"language-react line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"react\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-react\"><span class=\"line\"><span>      {createPortal(&#x3C;GlobalAudioElement ref={audioRef} />, document.body)}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><h2 id=\"类中的构造期-是否需要添加super\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#类中的构造期-是否需要添加super\"><span>类中的构造期 是否需要添加super</span></a></h2>\n<p>![image-20250809145753313](/Users/guoguo/Library/Application Support/typora-user-images/image-20250809145753313.png)</p>\n<h2 id=\"类式组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#类式组件\"><span>类式组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250809160446729.png\" alt=\"image-20250809160446729\"></p>\n<h2 id=\"函数式组件-props-基础使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#函数式组件-props-基础使用\"><span>函数式组件 props 基础使用</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250809190851584.png\" alt=\"image-20250809190851584\"></p>\n<h2 id=\"生命周期\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#生命周期\"><span>生命周期</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810094535016.png\" alt=\"image-20250810094535016\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810095302613.png\" alt=\"image-20250810095302613\"></p>\n<h2 id=\"新的生命周期钩子\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#新的生命周期钩子\"><span>新的生命周期钩子</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810100940405.png\" alt=\"image-20250810100940405\"></p>\n<h2 id=\"路由的严格匹配\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#路由的严格匹配\"><span>路由的严格匹配</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810161021987.png\" alt=\"image-20250810161021987\"></p>\n<h2 id=\"强制刷新组件-forceupdate\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#强制刷新组件-forceupdate\"><span>强制刷新组件 forceUpdate</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810182537508.png\" alt=\"image-20250810182537508\"></p>\n<h2 id=\"保存一个旧值\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#保存一个旧值\"><span>保存一个旧值</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810211105716.png\" alt=\"image-20250810211105716\"></p>\n<h2 id=\"forwardref-和-useimperativehandle-相当于-vue中的defineexport\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#forwardref-和-useimperativehandle-相当于-vue中的defineexport\"><span>forwardRef 和 useImperativeHandle 相当于 vue中的defineExport</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810213809732.png\" alt=\"image-20250810213809732\"></p>\n<h2 id=\"终止fetch请求-使用useeffect-清理函数-abortcontroller\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#终止fetch请求-使用useeffect-清理函数-abortcontroller\"><span>终止fetch请求 使用useEffect 清理函数 AbortController</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810220000019.png\" alt=\"image-20250810220000019\"></p>\n<h2 id=\"ts-typeof-自动获取类型-不用使用any了\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ts-typeof-自动获取类型-不用使用any了\"><span>TS   typeof 自动获取类型 不用使用any了</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810222544462.png\" alt=\"image-20250810222544462\"></p>\n<h2 id=\"usestate-useeffect-usereducer\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usestate-useeffect-usereducer\"><span>useState useEffect useReducer</span></a></h2>\n<p>usestate 相当于vue的 ref</p>\n<p>useReducer 相当于vue的 reactive</p>\n<p>useEffect 相当于vue的 watch + cumputed + const</p>\n<h2 id=\"react-memo-缓存变化-只有props-发生变化才会重新渲染\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#react-memo-缓存变化-只有props-发生变化才会重新渲染\"><span>React.memo 缓存变化，只有props 发生变化才会重新渲染</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810223528759.png\" alt=\"image-20250810223528759\"></p>\n<h2 id=\"usememo函数的返回值是一个计算好的值-而不是函数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usememo函数的返回值是一个计算好的值-而不是函数\"><span>useMemo函数的返回值是一个计算好的值，而不是函数</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810224323429.png\" alt=\"image-20250810224323429\"></p>\n<h2 id=\"zustand-相当于-pinia\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-相当于-pinia\"><span>zustand 相当于 pinia</span></a></h2>\n<blockquote>\n<p>store / price.jsx</p>\n</blockquote>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  setPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>A 组件</p>\n</blockquote>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">../../store/price</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">  console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">price ===></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>{</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">button</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> onClick</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">={()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">100</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)}></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">add</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">button</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> A</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-中间件网址https-zustand-nodejs-cn-docs-middlewares-persist\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-中间件网址https-zustand-nodejs-cn-docs-middlewares-persist\"><span>Zustand 中间件网址https://zustand.nodejs.cn/docs/middlewares/persist</span></a></h2>\n<h2 id=\"zustand-immer-案例-代码片段\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-immer-案例-代码片段\"><span>Zustand + immer 案例 代码片段</span></a></h2>\n<div class=\"language-jsx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"jsx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-jsx\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> immer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">zustand/middleware/immer</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> create</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  immer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">      bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        ccc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        ddd</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        eee</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">      },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    setPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    addPrice</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ({</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">price</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> price</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    setBbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> set</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">ccc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> state</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">aaa</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">bbb</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">ccc</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  }))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> default</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> usePriceStore</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-useshallow-避免重复渲染问题\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-useshallow-避免重复渲染问题\"><span>zustand useShallow，避免重复渲染问题</span></a></h2>\n<p>zustand redux devtools 调试中间件</p>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { create } from 'zustand'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { immer } from 'zustand/middleware/immer'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+ import { devtools } from 'zustand/middleware'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">const usePriceStore = create()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  immer(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     devtools(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      (set) => ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        price: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        aaa: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          bbb: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            ccc: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            ddd: 2,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            eee: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        setPrice: (price) => set(() => ({ price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        addPrice: (price) => set((state) => ({ price: state.price + price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      }),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+      { name: 'priceStore' }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+  )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default usePriceStore;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"zustand-持久化存储\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zustand-持久化存储\"><span>Zustand  持久化存储</span></a></h2>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { create } from 'zustand'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import { immer } from 'zustand/middleware/immer'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+ import { devtools, persist, createJSONStorage } from 'zustand/middleware'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">const usePriceStore = create()(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  immer(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    persist(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      devtools(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        (set) => ({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          price: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          aaa: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            bbb: {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              ccc: 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              ddd: 2,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">              eee: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          setPrice: (price) => set(() => ({ price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          addPrice: (price) => set((state) => ({ price: state.price + price })),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">          name: 'priceStore',</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">      ),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        name: 'priceStore',</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        storage: createJSONStorage(() => sessionStorage),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        // partialize 用的不多 可以自定义存储</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+     }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default usePriceStore;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"性能优化-独立监听某一个-避免hooks-持续调用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#性能优化-独立监听某一个-避免hooks-持续调用\"><span>性能优化 独立监听某一个 避免hooks 持续调用</span></a></h2>\n<div class=\"language-diff line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"diff\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-diff\"><span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+import React, { useEffect, useRef } from 'react';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import A from '../A/index';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">import B from '../B/index';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+import usePriceStore from '../../store/price';</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">function HelloWorld(props) {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    useEffect(() => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        usePriceStore.subscribe((state) => state.price, (price, prevPrice) => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            console.log('price change ===>', price, prevPrice);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        })</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        return () => {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            usePriceStore.unsubscribe()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        }, {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            fireImmediately: true,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+            equalityFn: (a, b) => a === b,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#22863A;--shiki-dark:#85E89D\">+    }, []);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    return (</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        &#x3C;div></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;A /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;hr /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            &#x3C;B /></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        &#x3C;/div></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">export default HelloWorld;</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"tailwind-封装到独立的文件中\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tailwind-封装到独立的文件中\"><span>tailwind 封装到独立的文件中</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250811224821132.png\" alt=\"image-20250811224821132\"></p>\n<h2 id=\"将-usesearchparams-转换为对象-并附上类型\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#将-usesearchparams-转换为对象-并附上类型\"><span>将 useSearchParams 转换为对象, 并附上类型</span></a></h2>\n<div class=\"language-ts line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"ts\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-ts\"><span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">use client</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> useSearchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">next/navigation</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> useMemo</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> from</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">react</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/**</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * 将 useSearchParams 转换为对象, 并附上类型</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">@</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">example</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * const searchParams = useSearchParamsObject&#x3C;{ mode: string }>()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * const mode = searchParams.mode</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> * mode 的类型为 string | undefined</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> */</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">export</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> function</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useSearchParamsObject</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">>()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useSearchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  const </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParamsObject</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> useMemo</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> Object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromEntries</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">entries</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> as</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Partial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">  },</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">searchParams</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> searchParamsObject</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"mobx-react-函数式组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#mobx-react-函数式组件\"><span>Mobx-react 函数式组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075452454.png\" alt=\"image-20250813075452454\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075351599.png\" alt=\"image-20250813075351599\"></p>\n<h2 id=\"mobx-类组件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#mobx-类组件\"><span>MobX 类组件</span></a></h2>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075528968.png\" alt=\"image-20250813075528968\"></p>\n<p><img src=\"https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075604296.png\" alt=\"image-20250813075604296\"></p>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"## 数据驱动视图  相当于  ==>   ref reactive\n\n![image-20250806202821571](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806202821571.png)\n\n## 获取DOM 元素    Ref  \n\n![image-20250806211406840](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806211406840.png)\n\n\n\n![image-20250806211642728](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806211642728.png)\n\n\n\n\n\n## 发布评论功能\n\n![image-20250806212013056](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806212013056.png)\n\n\n\n## 发请求\n\n![image-20250806214952225](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806214952225.png)\n\n## 监听 useEffect 函数 三个状态\n\n![image-20250806215239921](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806215239921.png)\n\n\n\n## hooks 注意事项\n\n![image-20250806221255863](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806221255863.png)\n\n## 路由穿参\n\n![image-20250806223611028](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223611028.png)\n\n![image-20250806223633045](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223633045.png)\n\n## 路由嵌套 二级路由\n\n![image-20250806223854847](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250806223854847.png)\n\n## 穿梭组件 穿梭到body\n\n```react\n      {createPortal(<GlobalAudioElement ref={audioRef} />, document.body)}\n\n```\n\n\n\n## 类中的构造期 是否需要添加super\n\n![image-20250809145753313](/Users/guoguo/Library/Application Support/typora-user-images/image-20250809145753313.png)\n\n## 类式组件\n\n![image-20250809160446729](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250809160446729.png)\n\n\n\n## 函数式组件 props 基础使用\n\n![image-20250809190851584](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250809190851584.png)\n\n\n\n## 生命周期\n\n![image-20250810094535016](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810094535016.png)\n\n![image-20250810095302613](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810095302613.png)\n\n## 新的生命周期钩子\n\n\n\n![image-20250810100940405](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810100940405.png)\n\n## 路由的严格匹配\n\n![image-20250810161021987](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810161021987.png)\n\n\n\n## 强制刷新组件 forceUpdate   \n\n![image-20250810182537508](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810182537508.png)\n\n##  保存一个旧值\n\n![image-20250810211105716](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810211105716.png)\n\n\n\n## forwardRef 和 useImperativeHandle 相当于 vue中的defineExport\n\n\n\n![image-20250810213809732](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810213809732.png)\n\n## 终止fetch请求 使用useEffect 清理函数 AbortController  \n\n![image-20250810220000019](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810220000019.png)\n\n## TS   typeof 自动获取类型 不用使用any了\n\n\n\n\n\n![image-20250810222544462](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810222544462.png)\n\n\n\n\n\n## useState useEffect useReducer\n\nusestate 相当于vue的 ref\n\nuseReducer 相当于vue的 reactive\n\nuseEffect 相当于vue的 watch + cumputed + const\n\n\n\n\n\n## React.memo 缓存变化，只有props 发生变化才会重新渲染\n\n\n\n![image-20250810223528759](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810223528759.png)\n\n\n\n## useMemo函数的返回值是一个计算好的值，而不是函数\n\n![image-20250810224323429](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250810224323429.png)\n\n## zustand 相当于 pinia\n\n> store / price.jsx\n\n```jsx\nimport { create } from 'zustand'\n\nconst usePriceStore = create((set) => ({\n  price: 0,\n  setPrice: (price) => set(() => ({ price })),\n    addPrice: (price) => set((state) => ({ price: state.price + price })),\n    \n}))\n\nexport default usePriceStore;\n```\n\n> A 组件\n\n```jsx\nimport usePriceStore from '../../store/price';\n\nconst A = () => {\n  const { price, addPrice } = usePriceStore();\n  console.log('price ===>', price);\n  return (\n    <div>\n      <h1>A</h1>\n      <h2>{price}</h2>\n      <button onClick={() => addPrice(100)}>add</button>\n    </div>\n  );\n};\n\nexport default A;\n```\n\n\n\n## Zustand 中间件网址https://zustand.nodejs.cn/docs/middlewares/persist\n\n\n\n\n\n## Zustand + immer 案例 代码片段\n\n```jsx\nimport { create } from 'zustand'\nimport { immer } from 'zustand/middleware/immer'\n\nconst usePriceStore = create()(\n  immer((set) => ({\n    price: 0,\n    aaa: {\n      bbb: {\n        ccc: 0,\n        ddd: 2,\n        eee: 3\n      },\n    },\n    setPrice: (price) => set(() => ({ price })),\n    addPrice: (price) => set((state) => ({ price: state.price + price })),\n    setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }\n    ),\n  }))\n)\n\nexport default usePriceStore;\n```\n\n## zustand useShallow，避免重复渲染问题\n\n\n\nzustand redux devtools 调试中间件\n\n```diff\nimport { create } from 'zustand'\nimport { immer } from 'zustand/middleware/immer'\n+ import { devtools } from 'zustand/middleware'\n\nconst usePriceStore = create()(\n  immer(\n+     devtools(\n      (set) => ({\n        price: 0,\n        aaa: {\n          bbb: {\n            ccc: 0,\n            ddd: 2,\n            eee: 3\n          },\n        },\n        setPrice: (price) => set(() => ({ price })),\n        addPrice: (price) => set((state) => ({ price: state.price + price })),\n        setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }\n        ),\n      }),\n+      { name: 'priceStore' }\n    )\n+  )\n)\n\nexport default usePriceStore;\n\n```\n\n\n\n## Zustand  持久化存储\n\n\n\n```diff\nimport { create } from 'zustand'\nimport { immer } from 'zustand/middleware/immer'\n+ import { devtools, persist, createJSONStorage } from 'zustand/middleware'\n\nconst usePriceStore = create()(\n  immer(\n+    persist(\n      devtools(\n        (set) => ({\n          price: 0,\n          aaa: {\n            bbb: {\n              ccc: 0,\n              ddd: 2,\n              eee: 3\n            },\n          },\n          setPrice: (price) => set(() => ({ price })),\n          addPrice: (price) => set((state) => ({ price: state.price + price })),\n          setBbb: () => set((state) => { state.aaa.bbb.ccc = state.aaa.bbb.ccc + 1 }\n          ),\n        }),\n        {\n          name: 'priceStore',\n        }\n      ),\n+     {\n+        name: 'priceStore',\n+        storage: createJSONStorage(() => sessionStorage),\n+        // partialize 用的不多 可以自定义存储\n+     }\n+    )\n  )\n)\n\nexport default usePriceStore;\n\n```\n\n## 性能优化 独立监听某一个 避免hooks 持续调用\n\n```diff\n+import React, { useEffect, useRef } from 'react';\nimport A from '../A/index';\nimport B from '../B/index';\n+import usePriceStore from '../../store/price';\nfunction HelloWorld(props) {\n\n+    useEffect(() => {\n+        usePriceStore.subscribe((state) => state.price, (price, prevPrice) => {\n+            console.log('price change ===>', price, prevPrice);\n+        })\n+        return () => {\n+            usePriceStore.unsubscribe()\n+        }, {\n+            fireImmediately: true,\n+            equalityFn: (a, b) => a === b,\n+        }\n+    }, []);\n\n    return (\n        <div>\n            <A />\n            <hr />\n            <B />\n        </div>\n    );\n}\n\n\n\nexport default HelloWorld;\n```\n\n## tailwind 封装到独立的文件中\n\n![image-20250811224821132](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250811224821132.png)\n\n\n\n## 将 useSearchParams 转换为对象, 并附上类型\n\n```ts\n'use client'\n\nimport { useSearchParams } from 'next/navigation'\nimport { useMemo } from 'react'\n\n/**\n * 将 useSearchParams 转换为对象, 并附上类型\n * @example\n * const searchParams = useSearchParamsObject<{ mode: string }>()\n * const mode = searchParams.mode\n * mode 的类型为 string | undefined\n */\nexport function useSearchParamsObject<T>() {\n  const searchParams = useSearchParams()\n  const searchParamsObject = useMemo(() => {\n    return Object.fromEntries(searchParams.entries()) as Partial<T>\n  }, [searchParams])\n  return searchParamsObject\n}\n\n```\n\n\n\n\n\n## Mobx-react 函数式组件\n\n![image-20250813075452454](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075452454.png)\n\n![image-20250813075351599](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075351599.png)\n\n## MobX 类组件\n\n![image-20250813075528968](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075528968.png)\n\n![image-20250813075604296](https://aliyxd.oss-cn-beijing.aliyuncs.com/image-20250813075604296.png)","excerpt":"","includedFiles":[],"tasklistId":0,"title":"","headers":[{"level":2,"title":"数据驱动视图  相当于  ==>   ref reactive","slug":"数据驱动视图-相当于-ref-reactive","link":"#数据驱动视图-相当于-ref-reactive","children":[]},{"level":2,"title":"获取DOM 元素    Ref","slug":"获取dom-元素-ref","link":"#获取dom-元素-ref","children":[]},{"level":2,"title":"发布评论功能","slug":"发布评论功能","link":"#发布评论功能","children":[]},{"level":2,"title":"发请求","slug":"发请求","link":"#发请求","children":[]},{"level":2,"title":"监听 useEffect 函数 三个状态","slug":"监听-useeffect-函数-三个状态","link":"#监听-useeffect-函数-三个状态","children":[]},{"level":2,"title":"hooks 注意事项","slug":"hooks-注意事项","link":"#hooks-注意事项","children":[]},{"level":2,"title":"路由穿参","slug":"路由穿参","link":"#路由穿参","children":[]},{"level":2,"title":"路由嵌套 二级路由","slug":"路由嵌套-二级路由","link":"#路由嵌套-二级路由","children":[]},{"level":2,"title":"穿梭组件 穿梭到body","slug":"穿梭组件-穿梭到body","link":"#穿梭组件-穿梭到body","children":[]},{"level":2,"title":"类中的构造期 是否需要添加super","slug":"类中的构造期-是否需要添加super","link":"#类中的构造期-是否需要添加super","children":[]},{"level":2,"title":"类式组件","slug":"类式组件","link":"#类式组件","children":[]},{"level":2,"title":"函数式组件 props 基础使用","slug":"函数式组件-props-基础使用","link":"#函数式组件-props-基础使用","children":[]},{"level":2,"title":"生命周期","slug":"生命周期","link":"#生命周期","children":[]},{"level":2,"title":"新的生命周期钩子","slug":"新的生命周期钩子","link":"#新的生命周期钩子","children":[]},{"level":2,"title":"路由的严格匹配","slug":"路由的严格匹配","link":"#路由的严格匹配","children":[]},{"level":2,"title":"强制刷新组件 forceUpdate","slug":"强制刷新组件-forceupdate","link":"#强制刷新组件-forceupdate","children":[]},{"level":2,"title":"保存一个旧值","slug":"保存一个旧值","link":"#保存一个旧值","children":[]},{"level":2,"title":"forwardRef 和 useImperativeHandle 相当于 vue中的defineExport","slug":"forwardref-和-useimperativehandle-相当于-vue中的defineexport","link":"#forwardref-和-useimperativehandle-相当于-vue中的defineexport","children":[]},{"level":2,"title":"终止fetch请求 使用useEffect 清理函数 AbortController","slug":"终止fetch请求-使用useeffect-清理函数-abortcontroller","link":"#终止fetch请求-使用useeffect-清理函数-abortcontroller","children":[]},{"level":2,"title":"TS   typeof 自动获取类型 不用使用any了","slug":"ts-typeof-自动获取类型-不用使用any了","link":"#ts-typeof-自动获取类型-不用使用any了","children":[]},{"level":2,"title":"useState useEffect useReducer","slug":"usestate-useeffect-usereducer","link":"#usestate-useeffect-usereducer","children":[]},{"level":2,"title":"React.memo 缓存变化，只有props 发生变化才会重新渲染","slug":"react-memo-缓存变化-只有props-发生变化才会重新渲染","link":"#react-memo-缓存变化-只有props-发生变化才会重新渲染","children":[]},{"level":2,"title":"useMemo函数的返回值是一个计算好的值，而不是函数","slug":"usememo函数的返回值是一个计算好的值-而不是函数","link":"#usememo函数的返回值是一个计算好的值-而不是函数","children":[]},{"level":2,"title":"zustand 相当于 pinia","slug":"zustand-相当于-pinia","link":"#zustand-相当于-pinia","children":[]},{"level":2,"title":"Zustand 中间件网址https://zustand.nodejs.cn/docs/middlewares/persist","slug":"zustand-中间件网址https-zustand-nodejs-cn-docs-middlewares-persist","link":"#zustand-中间件网址https-zustand-nodejs-cn-docs-middlewares-persist","children":[]},{"level":2,"title":"Zustand + immer 案例 代码片段","slug":"zustand-immer-案例-代码片段","link":"#zustand-immer-案例-代码片段","children":[]},{"level":2,"title":"zustand useShallow，避免重复渲染问题","slug":"zustand-useshallow-避免重复渲染问题","link":"#zustand-useshallow-避免重复渲染问题","children":[]},{"level":2,"title":"Zustand  持久化存储","slug":"zustand-持久化存储","link":"#zustand-持久化存储","children":[]},{"level":2,"title":"性能优化 独立监听某一个 避免hooks 持续调用","slug":"性能优化-独立监听某一个-避免hooks-持续调用","link":"#性能优化-独立监听某一个-避免hooks-持续调用","children":[]},{"level":2,"title":"tailwind 封装到独立的文件中","slug":"tailwind-封装到独立的文件中","link":"#tailwind-封装到独立的文件中","children":[]},{"level":2,"title":"将 useSearchParams 转换为对象, 并附上类型","slug":"将-usesearchparams-转换为对象-并附上类型","link":"#将-usesearchparams-转换为对象-并附上类型","children":[]},{"level":2,"title":"Mobx-react 函数式组件","slug":"mobx-react-函数式组件","link":"#mobx-react-函数式组件","children":[]},{"level":2,"title":"MobX 类组件","slug":"mobx-类组件","link":"#mobx-类组件","children":[]}]}}
